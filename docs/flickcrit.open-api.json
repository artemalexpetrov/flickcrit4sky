{"openapi":"3.1.0","info":{"title":"FlickCrit API","description":"API for managing movies and ratings","version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Users","description":"User management endpoints"},{"name":"Authentication","description":"Authentication management API"},{"name":"Movies","description":"Movie management endpoints"},{"name":"Movie Ratings","description":"Endpoints for managing movie ratings"}],"paths":{"/api/v1/movies/{id}":{"get":{"tags":["Movies"],"summary":"Get movie by ID","description":"Returns a movie by its ID","operationId":"getMovie","parameters":[{"name":"id","in":"path","description":"Movie ID","required":true,"schema":{"$ref":"#/components/schemas/MovieId"}}],"responses":{"200":{"description":"Successfully retrieved the movie","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDto"}}}},"404":{"description":"Movie not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDto"}}}}}},"put":{"tags":["Movies"],"summary":"Update existing movie","description":"Updates an existing movie by its ID","operationId":"updateMovie","parameters":[{"name":"id","in":"path","description":"Movie ID","required":true,"schema":{"$ref":"#/components/schemas/MovieId"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieCreateRequest"}}},"required":true},"responses":{"200":{"description":"Movie successfully updated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDto"}}}},"404":{"description":"Movie not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDto"}}}},"403":{"description":"Access denied","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDto"}}}}},"security":[{"Bearer Authentication":[]}]},"delete":{"tags":["Movies"],"summary":"Delete movie","description":"Deletes an existing movie by its ID","operationId":"deleteMovie","parameters":[{"name":"id","in":"path","description":"Movie ID","required":true,"schema":{"$ref":"#/components/schemas/MovieId"}}],"responses":{"204":{"description":"Movie successfully deleted"},"404":{"description":"Movie not found"},"403":{"description":"Access denied"}},"security":[{"Bearer Authentication":[]}]}},"/api/v1/movies":{"get":{"tags":["Movies"],"summary":"Get all movies","description":"Returns a paginated list of all movies","operationId":"getMovies","parameters":[{"name":"pagingRequest","in":"query","required":true,"schema":{"$ref":"#/components/schemas/PageRequestDto"}}],"responses":{"200":{"description":"Successfully retrieved movies","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResponseMovieDto"}}}}}},"post":{"tags":["Movies"],"summary":"Create new movie","description":"Creates a new movie entry","operationId":"createMovie","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieCreateRequest"}}},"required":true},"responses":{"201":{"description":"Movie successfully created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDto"}}}},"403":{"description":"Access denied","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDto"}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/v1/movies/{movieId}/rating":{"get":{"tags":["Movie Ratings"],"summary":"Get movie rating","description":"Retrieves the average rating for a movie","operationId":"getRating","parameters":[{"name":"movieId","in":"path","description":"ID of the movie","required":true,"schema":{"$ref":"#/components/schemas/MovieId"}}],"responses":{"200":{"description":"Successfully retrieved movie rating","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AverageRatingDto"}}}},"404":{"description":"Movie not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AverageRatingDto"}}}}}},"post":{"tags":["Movie Ratings"],"summary":"Rate a movie","description":"Submit a rating for a movie","operationId":"rateMovie","parameters":[{"name":"movieId","in":"path","description":"ID of the movie","required":true,"schema":{"$ref":"#/components/schemas/MovieId"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateMovieRequest"}}},"required":true},"responses":{"200":{"description":"Successfully rated the movie","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserMovieRatingDto"}}}},"404":{"description":"Movie not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserMovieRatingDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserMovieRatingDto"}}}}},"security":[{"Bearer Authentication":[]}]},"delete":{"tags":["Movie Ratings"],"summary":"Delete movie rating","description":"Remove user's rating for a movie","operationId":"deleteRating","parameters":[{"name":"movieId","in":"path","description":"ID of the movie","required":true,"schema":{"$ref":"#/components/schemas/MovieId"}}],"responses":{"204":{"description":"Rating successfully deleted"},"404":{"description":"Movie not found"},"401":{"description":"Unauthorized"}},"security":[{"Bearer Authentication":[]}]}},"/api/v1/auth/sign-up":{"post":{"tags":["Authentication"],"summary":"Register a new user","description":"Creates a new user account with the provided credentials","operationId":"signUp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpRequestDto"}}},"required":true},"responses":{"201":{"description":"User successfully created"},"400":{"description":"Invalid input data"},"409":{"description":"User already exists"}}}},"/api/v1/auth/sign-in":{"post":{"tags":["Authentication"],"summary":"Authenticate user","description":"Authenticates user and returns access and refresh tokens","operationId":"signIn","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInRequestDto"}}},"required":true},"responses":{"200":{"description":"Successfully authenticated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenPair"}}}},"401":{"description":"Invalid credentials","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenPair"}}}}}}},"/api/v1/auth/refresh-token":{"post":{"tags":["Authentication"],"summary":"Refresh token","description":"Generates new token pair using refresh token","operationId":"refreshToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequestDto"}}},"required":true},"responses":{"200":{"description":"New token pair generated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenPair"}}}},"401":{"description":"Invalid refresh token","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenPair"}}}}}}},"/api/v1/users":{"get":{"tags":["Users"],"summary":"Get all users","description":"Returns a paginated list of users. Requires ADMIN role.","operationId":"getUsers","parameters":[{"name":"pageRequest","in":"query","description":"Pagination parameters","required":true,"schema":{"$ref":"#/components/schemas/PageRequestDto"}}],"responses":{"200":{"description":"Successfully retrieved users","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResponseUserDto"}}}},"403":{"description":"Access denied","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResponseUserDto"}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/v1/users/{id}":{"get":{"tags":["Users"],"summary":"Get user by ID","description":"Returns a single user by their ID. Requires ADMIN role.","operationId":"getUser","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"$ref":"#/components/schemas/UserId"}}],"responses":{"200":{"description":"Successfully retrieved user","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"403":{"description":"Access denied","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"security":[{"Bearer Authentication":[]}]},"delete":{"tags":["Users"],"summary":"Delete user","description":"Deletes a user by their ID. Requires ADMIN role.","operationId":"deleteUser","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"$ref":"#/components/schemas/UserId"}}],"responses":{"204":{"description":"User successfully deleted"},"404":{"description":"User not found"},"403":{"description":"Access denied"}},"security":[{"Bearer Authentication":[]}]}},"/api/v1/movies/top":{"get":{"tags":["Movies"],"summary":"Get top rated movies","description":"Returns a list of top rated movies","operationId":"getTopRatedMovies","responses":{"200":{"description":"Successfully retrieved top rated movies","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RatedMovieDto"}}}}}}}}},"components":{"schemas":{"MovieId":{},"MovieCreateRequest":{"type":"object","description":"Movie details","properties":{"title":{"type":"string","maxLength":255,"minLength":0},"year":{"type":"integer","format":"int32","maximum":2099,"minimum":1888}},"required":["title","year"]},"MovieDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"isan":{"type":"string","format":"uuid"},"title":{"type":"string"},"year":{"type":"integer","format":"int32"}},"required":["id","isan","title"]},"RateMovieRequest":{"type":"object","properties":{"rating":{"type":"integer","format":"int32"}}},"UserMovieRatingDto":{"type":"object","properties":{"movieId":{"type":"integer","format":"int64"},"rating":{"type":"integer","format":"int32"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["movieId"]},"SignUpRequestDto":{"type":"object","properties":{"email":{"type":"string","format":"email","minLength":1},"password":{"type":"string"},"passwordRepeat":{"type":"string"}},"required":["email"]},"SignInRequestDto":{"type":"object","properties":{"email":{"type":"string","format":"email","minLength":1},"password":{"type":"string","minLength":1}},"required":["email","password"]},"TokenPair":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}},"RefreshTokenRequestDto":{"type":"object","properties":{"refreshToken":{"type":"string","minLength":1}},"required":["refreshToken"]},"PageRequestDto":{"type":"object","properties":{"page":{"type":"integer","format":"int32","description":"The page number","example":0,"maximum":2147483647,"minimum":0},"size":{"type":"integer","format":"int32","description":"The number of items on the page","example":20,"maximum":50,"minimum":1}}},"PageResponseUserDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}},"total":{"type":"integer","format":"int64"},"page":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"}}},"UserDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"roles":{"type":"array","items":{"type":"string","enum":["ADMIN","USER"]},"uniqueItems":true}},"required":["email","id","roles"]},"UserId":{},"PageResponseMovieDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/MovieDto"}},"total":{"type":"integer","format":"int64"},"page":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"}}},"AverageRatingDto":{"type":"object","properties":{"value":{"type":"number"},"ratesCount":{"type":"integer","format":"int64"}},"required":["ratesCount","value"]},"RatedMovieDto":{"type":"object","properties":{"movie":{"$ref":"#/components/schemas/MovieDto"},"rating":{"$ref":"#/components/schemas/AverageRatingDto"}},"required":["movie","rating"]}},"securitySchemes":{"Bearer Authentication":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}